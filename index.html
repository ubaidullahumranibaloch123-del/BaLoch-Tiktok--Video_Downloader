<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BaLoch TikTok Downloader</title>
<style>
body {
  margin:0;
  font-family:Arial, sans-serif;
  background: url('https://i.postimg.cc/w36xpMj0/background.jpg') no-repeat center center fixed;
  background-size: cover;
  text-align:center;
  color:#fff;
  overflow-x:hidden;
}

/* Fire Animated Heading Container */
.fire-heading-container {
  position: relative;
  display: inline-block;
  margin-top: 50px;
}

/* Heading */
h1 {
  font-size:36px;
  font-weight:bold;
  color:#ff4500;
  text-shadow:0 0 8px #ff4500,0 0 15px #ff8c00;
  letter-spacing:2px;
  position: relative;
  z-index:1;
  display: inline-block;
}

/* Fire canvas */
#fireCanvas {
  position:absolute;
  top:0;
  left:0;
  width:100%;
  height:150px;
  pointer-events:none;
  z-index:0;
}

/* Profile Section */
.profile-container {
  width:100%;
  margin-top:40px;
}
.profile-slide {
  display:flex;
  align-items:center;
  justify-content:center;
  gap:12px;
}
.profile-photo {
  width:120px;
  height:120px;
  border-radius:50%;
  border:3px solid #06b6d4;
  object-fit:cover;
  box-shadow:0 0 12px rgba(6,182,212,0.6);
  transition: transform 0.3s ease;
}
.profile-photo:hover{ transform: scale(1.05);}
.profile-info{ text-align:left;}
.profile-contact a{ color:#06b6d4; text-decoration:none; font-weight:500;}
.profile-contact a:hover{ color:#00f0ff;}

/* Rainbow Name */
#rainbowName {
  font-weight:bold;
  font-size:24px;
  display:inline-block;
  letter-spacing:2px;
  background:linear-gradient(90deg,#ff0000,#ff7f00,#ffff00,#00ff00,#0000ff,#8b00ff);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  animation: rainbowFlicker 2s infinite linear;
}
@keyframes rainbowFlicker{
  0%,100%{ filter:brightness(1); text-shadow:0 0 6px #fff; }
  50%{ filter:brightness(1.3); text-shadow:0 0 10px #fff; }
}

/* Download Section */
.download-container { margin-top:30px;}
input{ width:80%; padding:12px; margin:10px 0; border-radius:8px; border:none;}
button{ padding:12px 20px; border:none; background:#06b6d4; color:white; cursor:pointer; border-radius:5px; margin:5px; font-weight:bold;}
button:hover{ background:#00f0ff;}
#status{ margin-top:10px; font-weight:bold; color:#fff;}
</style>
</head>
<body>

<div class="fire-heading-container">
  <canvas id="fireCanvas"></canvas>
  <h1>BaLoch TikTok Downloader</h1>
</div>

<div class="profile-container">
  <div class="profile-slide">
    <img src="https://i.postimg.cc/z3JXTj4k/profile.jpg" class="profile-photo"/>
    <div class="profile-info">
      <div id="rainbowName">â¤âœ¨âƒâƒªğ”ğğ€ğˆğƒğ”ğ‹ğ‹ğ€ğ‡âŸ¶ğğ€ğ‹ğğ‚ğ‡ â¤</div>
      <div class="profile-contact">
        ğŸ“± <a href="https://wa.me/923048661181" target="_blank">03048661181</a> | 03702866763
      </div>
    </div>
  </div>
</div>

<div class="download-container">
  <input type="text" id="ttlink" placeholder="Paste TikTok video or audio link here">
  <br>
  <button id="dlVideo">Download Video</button>
  <button id="dlAudio">Download MP3</button>
  <div id="status"></div>
</div>

<script>
// Fire Particle Animation per letter (Design/CSS Logic)
const canvas=document.getElementById('fireCanvas');
const ctx=canvas.getContext('2d');
canvas.width=canvas.offsetWidth;
canvas.height=canvas.offsetHeight;

let particles=[];
const h1=document.querySelector('h1');
const letters=[];
const letterParticles=[];

// Split letters
[...h1.textContent].forEach((char,i)=>{
  letters.push({char, x:0, y:0});
  letterParticles[i]=[];
});

function updateLetterPositions(){
  const rects = h1.getClientRects();
  let offsetX = h1.offsetLeft;
  let offsetY = 0;
  let x=offsetX;
  let y=h1.offsetTop;
  const spacing=20; // approximate
  letters.forEach((l,i)=>{
    l.x = x;
    l.y = y + h1.offsetHeight;
    x+=spacing;
  });
}
updateLetterPositions();
window.addEventListener('resize',updateLetterPositions);

// Particle class
function Particle(x,y){
  this.x=x+Math.random()*8-4;
  this.y=y;
  this.size=Math.random()*4+2;
  this.speedX=Math.random()*1.2-0.6;
  this.speedY=Math.random()*-2-1;
  this.color=`rgba(255,${Math.floor(Math.random()*150)},0,1)`;
  this.life=0;
  this.maxLife=Math.random()*40+30;
}
Particle.prototype.update=function(){
  this.x+=this.speedX; this.y+=this.speedY; this.life++;
}
Particle.prototype.draw=function(){
  ctx.beginPath();
  ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
  ctx.fillStyle=this.color;
  ctx.fill();
}

// Animate
function animate(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  letters.forEach((l,i)=>{
    // generate particles per letter
    for(let j=0;j<2;j++){
      letterParticles[i].push(new Particle(l.x,l.y));
    }
    // update and draw
    for(let k=0;k<letterParticles[i].length;k++){
      letterParticles[i][k].update();
      letterParticles[i][k].draw();
      if(letterParticles[i][k].life>letterParticles[i][k].maxLife){
        letterParticles[i].splice(k,1);
        k--;
      }
    }
  });
  requestAnimationFrame(animate);
}
animate();

// --- Ø¨ÛŒÚ© Ø§ÛŒÙ†Úˆ Ø§Ù†Ù¹ÛŒÚ¯Ø±ÛŒØ´Ù† Ù„Ø§Ø¬Ú© (Download Logic) ---

// **Ø§ÛÙ…:** Ø§Ú¯Ø± Ø¢Ù¾ Ù†Û’ Node.js Ø³Ø±ÙˆØ± Ú†Ù„Ø§ÛŒØ§ ÛÛ’ ØªÙˆ Ø§Ø³Û’ http://localhost:3000/download Ø±ÛÙ†Û’ Ø¯ÛŒÚº
// **Ù„ÛŒÚ©Ù†** Ø¬Ø¨ Ø¢Ù¾ Ø§Ø³Û’ Ù„Ø§Ø¦ÛŒÙˆ deploy Ú©Ø± Ù„ÛŒÚº (Render/Heroku Ù¾Ø±)ØŒ ØªÙˆ Ø§Ø³Û’ Ø§Ù¾Ù†Û’ Ù„Ø§Ø¦ÛŒÙˆ URL Ø³Û’ Ø¨Ø¯Ù„ Ø¯ÛŒÚº!
const backendURL = "http://localhost:3000/download"; 

async function handleDownload(type) {
    const link = document.getElementById('ttlink').value;
    const statusElement = document.getElementById('status');
    
    // Ù„Ù†Ú© Ú©ÛŒ ØªØµØ¯ÛŒÙ‚
    if (!link) {
        statusElement.style.color = 'yellow';
        statusElement.innerText = "âš ï¸ Please paste a link first.";
        return;
    }

    statusElement.style.color = '#fff';
    statusElement.innerText = `ğŸ”„ Preparing ${type} download... Please wait.`;

    try {
        const response = await fetch(backendURL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ link: link, type: type })
        });

        const data = await response.json();

        if (data.success && data.downloadUrl) {
            statusElement.style.color = '#00ff00';
            statusElement.innerText = `âœ… Success! Redirecting to download...`;
            
            // Ø¨Ø±Ø§Ø¤Ø²Ø± Ú©Ùˆ ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ URL Ù¾Ø± Ø±ÛŒ ÚˆØ§Ø¦Ø±ÛŒÚ©Ù¹ Ú©Ø±ÛŒÚº
            window.location.href = data.downloadUrl;
        } else {
            statusElement.style.color = '#ff4500';
            statusElement.innerText = `âŒ Error: ${data.error || 'Failed to get download link.'}`;
        }
    } catch (e) {
        statusElement.style.color = '#ff4500';
        statusElement.innerText = "âŒ Connection error. Check the backend server (Node.js).";
        console.error("Fetch Error:", e);
    }
}

// ÚˆØ§Ø¤Ù† Ù„ÙˆÚˆ Ø¨Ù¹Ù† Ø§ÛŒÙˆÙ†Ù¹Ø³
document.getElementById('dlVideo').onclick = () => handleDownload('video');
document.getElementById('dlAudio').onclick = () => handleDownload('audio');

</script>
</body>
</html>
